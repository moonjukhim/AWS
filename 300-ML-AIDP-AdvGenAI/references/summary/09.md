┌──────────────────────────────────────────────┐
│                1. User Layer               │
│  User Query / Agent Interaction / API Call │
└──────────────────────────────────────────────┘
                        │
                        ▼
┌──────────────────────────────────────────────┐
│          2. Inference & RAG Layer          │
│  - Foundation Model (Bedrock)              │
│  - Retrieval (Vector DB)                   │
│  - Prompt Template                         │
└──────────────────────────────────────────────┘
                        │
                        ▼
┌──────────────────────────────────────────────┐
│        3. Observability & Logging Layer     │
│  - Model Invocation Logs                    │
│  - Token usage / Latency / Errors           │
│  - Session metadata                         │
│  (CloudWatch + S3 + OpenSearch)             │
└──────────────────────────────────────────────┘
                        │
                        ▼
┌──────────────────────────────────────────────┐
│        4. Automated Evaluation Layer        │
│  - LLM-as-a-Judge                           │
│  - Retrieval Metrics (P@K, MRR, NDCG)       │
│  - Quality Scoring (Accuracy, Faithfulness) │
│  - Bias / Hallucination detection           │
└──────────────────────────────────────────────┘
                        │
                        ▼
┌──────────────────────────────────────────────┐
│          5. Metric Aggregation Layer        │
│  - Baseline comparison                      │
│  - Drift detection                          │
│  - Threshold analysis                       │
│  - Trend projection                         │
│  (CloudWatch Metrics / Athena / QuickSight) │
└──────────────────────────────────────────────┘
                        │
         ┌──────────────┴──────────────┐
         ▼                             ▼
┌───────────────────────┐     ┌────────────────────────┐
│ 6A. Alert & Escalate  │     │ 6B. Improvement Engine │
│ - SNS / PagerDuty     │     │ - Prompt refinement     │
│ - Incident workflow   │     │ - RAG tuning            │
│ - Rollback trigger    │     │ - Model version update  │
└───────────────────────┘     └────────────────────────┘
         │                             │
         └──────────────┬──────────────┘
                        ▼
┌──────────────────────────────────────────────┐
│           7. Redeploy & Versioning          │
│  - Model Registry                           │
│  - Canary / Blue-Green                      │
│  - Rollback capability                      │
└──────────────────────────────────────────────┘
                        │
                        ▼
                (Loop back to Inference)
