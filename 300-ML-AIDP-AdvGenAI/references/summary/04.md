### ì§€í‘œë“¤

1ï¸âƒ£ ì„±ëŠ¥ ê´€ì  (Performance Metrics)

- ì‘ë‹µì„±ëŠ¥

| ì§€í‘œ                           | ì˜ë¯¸            | ì™œ ì¤‘ìš”í•œê°€           |
| ---------------------------- | ------------- | ---------------- |
| **Request Start / End Time** | ìš”ì²­ ì‹œì‘Â·ì¢…ë£Œ ì‹œê°   | SLA ì¶”ì , ì¥ì•  ì‹œì  ë¶„ì„ |
| **TTFT**                     | ì²« í† í°ê¹Œì§€ ì‹œê°„     | ì²´ê° ì‚¬ìš©ì ê²½í—˜ì˜ í•µì‹¬    |
| **End-to-End Latency**       | ì „ì²´ ì²˜ë¦¬ ì‹œê°„      | ì„œë¹„ìŠ¤ í’ˆì§ˆ(SLO) íŒë‹¨   |
| **Streaming Duration**       | ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì§€ì† ì‹œê°„ | ëŒ€í™” UX í’ˆì§ˆ         |

- ì²˜ë¦¬ëŸ‰ & ì•ˆì •ì„±

| ì§€í‘œ                             | ì˜ë¯¸          | ì™œ ì¤‘ìš”í•œê°€     |
| ------------------------------ | ----------- | ---------- |
| **Requests per Second (RPS)**  | ì²˜ë¦¬ ê°€ëŠ¥í•œ ìš”ì²­ ìˆ˜ | í™•ì¥ì„± íŒë‹¨     |
| **Error Rate (4xx/5xx)**       | ì˜¤ë¥˜ ë°œìƒ ë¹„ìœ¨    | ì‹ ë¢°ì„± ì§€í‘œ     |
| **Retry Count**                | ì¬ì‹œë„ íšŸìˆ˜      | ì™¸ë¶€ ì˜ì¡´ì„± ì•ˆì •ì„± |
| **Graceful Degradation ë°œìƒ íšŸìˆ˜** | ê¸°ëŠ¥ ì¶•ì†Œ ë™ì‘    | ì¥ì•  ëŒ€ì‘ ì„±ìˆ™ë„  |

- ë¹„ìš© íš¨ìœ¨

| ì§€í‘œ                               | ì˜ë¯¸      | ì™œ ì¤‘ìš”í•œê°€      |
| -------------------------------- | ------- | ----------- |
| **Input Tokens / Output Tokens** | í† í° ì‚¬ìš©ëŸ‰  | ë¹„ìš© ì‚°ì •ì˜ í•µì‹¬   |
| **Cost per Query**               | ìš”ì²­ë‹¹ ë¹„ìš©  | ë¹„ì¦ˆë‹ˆìŠ¤ KPI ì—°ê²° |
| **Prompt Length**                | í”„ë¡¬í”„íŠ¸ í¬ê¸° | ì»¨í…ìŠ¤íŠ¸ ìµœì í™” íŒë‹¨ |
| **Context Compression Ratio**    | ì••ì¶• ë¹„ìœ¨   | ë¹„ìš©Â·ì„±ëŠ¥ ê· í˜•    |


2ï¸âƒ£ ê±°ë²„ë„ŒìŠ¤ ê´€ì  (Governance Metrics)

- í”„ë¡¬í”„íŠ¸ ìˆ˜ëª…ì£¼ê¸° ê´€ë¦¬

| ì§€í‘œ                    | ì˜ë¯¸                   | ì™œ ì¤‘ìš”í•œê°€   |
| --------------------- | -------------------- | -------- |
| **Prompt Version ID** | í”„ë¡¬í”„íŠ¸ ê³ ìœ  ë²„ì „           | ì¬í˜„ì„±Â·ê°ì‚¬   |
| **Approval Status**   | ìŠ¹ì¸ ì—¬ë¶€                | ë¬´ë‹¨ ë³€ê²½ ë°©ì§€ |
| **Deployment Stage**  | Dev / Staging / Prod | ë³€ê²½ í†µì œ    |
| **Rollback Count**    | ë¡¤ë°± íšŸìˆ˜                | í’ˆì§ˆ ë¬¸ì œ ì‹ í˜¸ |

- í’ˆì§ˆ & ì¼ê´€ì„±

| ì§€í‘œ                                 | ì˜ë¯¸           | ì™œ ì¤‘ìš”í•œê°€    |
| ---------------------------------- | ------------ | --------- |
| **Output Validation Pass Rate**    | ìŠ¤í‚¤ë§ˆ/ê·œì¹™ í†µê³¼ìœ¨   | ì•ˆì •ì„±       |
| **Consistency Score**              | ë™ì¼ ì…ë ¥ ì‘ë‹µ ì¼ê´€ì„± | ì‹ ë¢°ì„±       |
| **Accuracy (Business Validation)** | ë¹„ì¦ˆë‹ˆìŠ¤ ì í•©ì„±     | ì‹¤ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ |
| **UAT Pass/Fail**                  | ì‚¬ìš©ì ìˆ˜ìš© ì—¬ë¶€    | í˜„ì—… í’ˆì§ˆ     |

- í¸í–¥ & ì±…ì„ ìˆëŠ” AI

| ì§€í‘œ                         | ì˜ë¯¸          | ì™œ ì¤‘ìš”í•œê°€ |
| -------------------------- | ----------- | ------ |
| **Bias Detection Rate**    | í¸í–¥ ê°ì§€ ë¹ˆë„    | ê³µì •ì„±    |
| **Demographic Coverage**   | í…ŒìŠ¤íŠ¸ ë‹¤ì–‘ì„±     | ê·œì œ ëŒ€ì‘  |
| **Mitigation Loop Count**  | í¸í–¥ ê°œì„  ë°˜ë³µ íšŸìˆ˜ | ì„±ìˆ™ë„    |
| **Policy Violation Count** | ì •ì±… ìœ„ë°˜       | ë¦¬ìŠ¤í¬ ê´€ë¦¬ |

- ë³´ì•ˆ & ê°ì‚¬

| ì§€í‘œ                               | ì˜ë¯¸        | ì™œ ì¤‘ìš”í•œê°€ |
| -------------------------------- | --------- | ------ |
| **Prompt Access Logs**           | ëˆ„ê°€ ì‚¬ìš©í–ˆëŠ”ê°€  | ì±…ì„ ì¶”ì   |
| **IAM Role Used**                | í˜¸ì¶œ ì£¼ì²´     | ê¶Œí•œ í†µì œ  |
| **Sensitive Output Filter Hits** | ë¯¼ê° ì •ë³´ ì°¨ë‹¨  | ë°ì´í„° ë³´í˜¸ |
| **Audit Trail Completeness**     | ê°ì‚¬ ë¡œê·¸ ì™„ì „ì„± | ê·œì œ ëŒ€ì‘  |


### TTFTë¥¼ ì¸¡ì •

```python
import time
import json
from IPython.display import clear_output, display_markdown, Markdown

try:
    request_start_time = time.perf_counter()
    first_token_time = None

    body = format_for_nova_lite(prompt_data)

    response = bedrock_client.invoke_model_with_response_stream(
        body=json.dumps(body), 
        modelId=modelId, 
        accept=accept, 
        contentType=contentType
    )

    stream = response.get("body")
    output = []

    for event in stream:
        chunk = event.get("chunk")
        print(chunk)
        if not chunk:
            continue

        # âœ… ì²« ìŠ¤íŠ¸ë¦¬ë° ì´ë²¤íŠ¸ ê¸°ì¤€ TTFT ì¸¡ì •
        if first_token_time is None:
            first_token_time = time.perf_counter()
            ttft_ms = (first_token_time - request_start_time) * 1000
            print(f"ğŸ•’ TTFT: {ttft_ms:.2f} ms")

        chunk_obj = json.loads(chunk.get("bytes").decode())

        if "contentBlockDelta" in chunk_obj:
            delta = chunk_obj["contentBlockDelta"].get("delta", {})
            text = delta.get("text", "")

            if text:
                output.append(text)
                clear_output(wait=True)
                display_markdown(Markdown("".join(output)))

except Exception as e:
    print(f"An unexpected error occurred: {e}")


```

